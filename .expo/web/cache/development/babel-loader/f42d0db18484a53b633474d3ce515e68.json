{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport firebase from \"firebase\";\n\nvar Fire = function () {\n  function Fire() {\n    var _this = this;\n\n    _classCallCheck(this, Fire);\n\n    this.init = function () {\n      if (!firebase.apps.length) {\n        firebase.initializeApp({\n          apiKey: \"AIzaSyBxF2_kvAbNUpM3fWBy3jssLvPHs0Qpysk\",\n          authDomain: \"letschat-4b32a.firebaseapp.com\",\n          projectId: \"letschat-4b32a\",\n          storageBucket: \"letschat-4b32a.appspot.com\",\n          messagingSenderId: \"12798451342\",\n          appId: \"1:12798451342:web:2d8c73188cf987303973df\"\n        });\n      }\n    };\n\n    this.checkAuth = function () {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (!user) {\n          firebase.auth().signInAnonymously();\n        }\n      });\n    };\n\n    this.send = function (messages) {\n      messages.forEach(function (item) {\n        var message = {\n          text: item.text,\n          timestamp: firebase.database.ServerValue.TIMESTAMP,\n          user: item.user\n        };\n\n        _this.db.push(message);\n      });\n    };\n\n    this.parse = function (message) {\n      var _message$val = message.val(),\n          user = _message$val.user,\n          text = _message$val.text,\n          timestamp = _message$val.timestamp;\n\n      var _id = message.key;\n      var createdAt = new Date(timestamp);\n      return {\n        _id: _id,\n        createdAt: createdAt,\n        text: text,\n        user: user,\n        timestamp: timestamp\n      };\n    };\n\n    this.get = function (callback) {\n      _this.db.on(\"child_added\", function (snapshot) {\n        return callback(_this.parse(snapshot));\n      });\n    };\n\n    this.init();\n    this.checkAuth();\n  }\n\n  _createClass(Fire, [{\n    key: \"off\",\n    value: function off() {\n      this.db.off();\n    }\n  }, {\n    key: \"db\",\n    get: function get() {\n      return firebase.database().ref(\"messages\");\n    }\n  }, {\n    key: \"uid\",\n    get: function get() {\n      return (firebase.auth().currentUser || {}).uid;\n    }\n  }]);\n\n  return Fire;\n}();\n\nexport default new Fire();","map":{"version":3,"sources":["C:/Users/User/Desktop/Kaushic/LetChat/Fire.js"],"names":["firebase","Fire","init","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","checkAuth","auth","onAuthStateChanged","user","signInAnonymously","send","messages","forEach","item","message","text","timestamp","database","ServerValue","TIMESTAMP","db","push","parse","val","_id","key","createdAt","Date","get","callback","on","snapshot","off","ref","currentUser","uid"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,UAArB;;IAEMC,I;AACJ,kBAAc;AAAA;;AAAA;;AAAA,SAKdC,IALc,GAKP,YAAM;AACX,UAAI,CAACF,QAAQ,CAACG,IAAT,CAAcC,MAAnB,EAA2B;AACzBJ,QAAAA,QAAQ,CAACK,aAAT,CAAuB;AACrBC,UAAAA,MAAM,EAAE,yCADa;AAErBC,UAAAA,UAAU,EAAE,gCAFS;AAGrBC,UAAAA,SAAS,EAAE,gBAHU;AAIrBC,UAAAA,aAAa,EAAE,4BAJM;AAKrBC,UAAAA,iBAAiB,EAAE,aALE;AAMrBC,UAAAA,KAAK,EAAE;AANc,SAAvB;AAQD;AACF,KAhBa;;AAAA,SAkBdC,SAlBc,GAkBF,YAAM;AAChBZ,MAAAA,QAAQ,CAACa,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,IAAD,EAAU;AAC3C,YAAI,CAACA,IAAL,EAAW;AACTf,UAAAA,QAAQ,CAACa,IAAT,GAAgBG,iBAAhB;AACD;AACF,OAJD;AAKD,KAxBa;;AAAA,SAyBdC,IAzBc,GAyBP,UAACC,QAAD,EAAc;AACnBA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAACC,IAAD,EAAU;AACzB,YAAMC,OAAO,GAAG;AACdC,UAAAA,IAAI,EAAEF,IAAI,CAACE,IADG;AAEdC,UAAAA,SAAS,EAAEvB,QAAQ,CAACwB,QAAT,CAAkBC,WAAlB,CAA8BC,SAF3B;AAGdX,UAAAA,IAAI,EAAEK,IAAI,CAACL;AAHG,SAAhB;;AAMA,QAAA,KAAI,CAACY,EAAL,CAAQC,IAAR,CAAaP,OAAb;AACD,OARD;AASD,KAnCa;;AAAA,SAoCdQ,KApCc,GAoCN,UAACR,OAAD,EAAa;AACnB,yBAAkCA,OAAO,CAACS,GAAR,EAAlC;AAAA,UAAQf,IAAR,gBAAQA,IAAR;AAAA,UAAcO,IAAd,gBAAcA,IAAd;AAAA,UAAoBC,SAApB,gBAAoBA,SAApB;;AACA,UAAaQ,GAAb,GAAqBV,OAArB,CAAQW,GAAR;AACA,UAAMC,SAAS,GAAG,IAAIC,IAAJ,CAASX,SAAT,CAAlB;AAEA,aAAO;AACLQ,QAAAA,GAAG,EAAHA,GADK;AAELE,QAAAA,SAAS,EAATA,SAFK;AAGLX,QAAAA,IAAI,EAAJA,IAHK;AAILP,QAAAA,IAAI,EAAJA,IAJK;AAKLQ,QAAAA,SAAS,EAATA;AALK,OAAP;AAOD,KAhDa;;AAAA,SAkDdY,GAlDc,GAkDR,UAACC,QAAD,EAAc;AAClB,MAAA,KAAI,CAACT,EAAL,CAAQU,EAAR,CAAW,aAAX,EAA0B,UAACC,QAAD;AAAA,eAAcF,QAAQ,CAAC,KAAI,CAACP,KAAL,CAAWS,QAAX,CAAD,CAAtB;AAAA,OAA1B;AACD,KApDa;;AACZ,SAAKpC,IAAL;AACA,SAAKU,SAAL;AACD;;;;WAmDD,eAAM;AACJ,WAAKe,EAAL,CAAQY,GAAR;AACD;;;SAED,eAAS;AACP,aAAOvC,QAAQ,CAACwB,QAAT,GAAoBgB,GAApB,CAAwB,UAAxB,CAAP;AACD;;;SAED,eAAU;AACR,aAAO,CAACxC,QAAQ,CAACa,IAAT,GAAgB4B,WAAhB,IAA+B,EAAhC,EAAoCC,GAA3C;AACD;;;;;;AAGH,eAAe,IAAIzC,IAAJ,EAAf","sourcesContent":["import firebase from \"firebase\";\r\n\r\nclass Fire {\r\n  constructor() {\r\n    this.init();\r\n    this.checkAuth();\r\n  }\r\n\r\n  init = () => {\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp({\r\n        apiKey: \"AIzaSyBxF2_kvAbNUpM3fWBy3jssLvPHs0Qpysk\",\r\n        authDomain: \"letschat-4b32a.firebaseapp.com\",\r\n        projectId: \"letschat-4b32a\",\r\n        storageBucket: \"letschat-4b32a.appspot.com\",\r\n        messagingSenderId: \"12798451342\",\r\n        appId: \"1:12798451342:web:2d8c73188cf987303973df\",\r\n      });\r\n    }\r\n  };\r\n\r\n  checkAuth = () => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      if (!user) {\r\n        firebase.auth().signInAnonymously();\r\n      }\r\n    });\r\n  };\r\n  send = (messages) => {\r\n    messages.forEach((item) => {\r\n      const message = {\r\n        text: item.text,\r\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\r\n        user: item.user,\r\n      };\r\n\r\n      this.db.push(message);\r\n    });\r\n  };\r\n  parse = (message) => {\r\n    const { user, text, timestamp } = message.val();\r\n    const { key: _id } = message;\r\n    const createdAt = new Date(timestamp);\r\n\r\n    return {\r\n      _id,\r\n      createdAt,\r\n      text,\r\n      user,\r\n      timestamp,\r\n    };\r\n  };\r\n\r\n  get = (callback) => {\r\n    this.db.on(\"child_added\", (snapshot) => callback(this.parse(snapshot)));\r\n  };\r\n\r\n  off() {\r\n    this.db.off();\r\n  }\r\n\r\n  get db() {\r\n    return firebase.database().ref(\"messages\");\r\n  }\r\n\r\n  get uid() {\r\n    return (firebase.auth().currentUser || {}).uid;\r\n  }\r\n}\r\n\r\nexport default new Fire();\r\n"]},"metadata":{},"sourceType":"module"}